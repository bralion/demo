<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="shortcut icon" href="../src/images/favicon.ico"/>
    <link rel="bookmark" href="../src/images/favicon.ico">
    <title>杨超林个人博客--谈心，交友，娱乐</title>
    <link rel="stylesheet" href="../src/css/public.css"/>
    <link rel="stylesheet" href="../src/css/layui.css">
    <link rel="stylesheet" href="../src/css/index.css">
    <link rel="stylesheet" href="../src/css/font-awesome.min.css">
    <link rel="stylesheet" href="../src/css/mobile.css" media="screen and (min-width:400px) and (max-device-width:600px)">
    <link rel="stylesheet" href="../src/css/mobilePad.css" media="screen and (min-width:600px) and (max-device-width:1025px)">
    <script src="../src/js/jquery.js"></script>
    <script src="../src/js/public.js"></script>
</head>
<body style="background-color: #f1f1f1">
<div id="container">
    <div class="toptip"><strong class="text-success"><i class="fa fa-volume-up"></i> </strong> &nbsp; 本博客动态功能上线了！</div>
    <div class="layui-carousel layui-hide-xs layui-hide-md" id="test1">
        <div carousel-item class="carousel">
            <div><img id="d1" src="../src/images/nPT0.jpg" alt=""/></div>
            <div><img src="../src/images/3PT0.jpg" alt=""/></div>
            <div><img src="../src/images/BBPT0.jpg" alt=""/></div>
        </div>
    </div>
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md9 layui-col-sm9 layui-col-xs12">
            <div class="topContent" id="topContent">
                <!--<p class="recommend">特别推荐</p>-->
                <!--<div class="layui-row layui-col-space1">-->
                <!--<div class="layui-col-sm6 recommendCard-left">-->
                <!--<a href="#" target="_blank">-->
                <!--<img src="../src/images/2.jpg" alt="哈佛大学用这12张图，教育了10亿人_心灵鸡汤" data-bd-imgshare-binded="1">-->
                <!--<h3>哈佛大学用这12张图，教育了10亿人_心灵鸡汤</h3>-->
                <!--<p class="muted">很多人把感恩当成一种付出，其实感恩本身就是一种幸福。...</p>-->
                <!--</a>-->
                <!--</div>-->
                <!--<div class="layui-col-sm6 recommendCard">-->
                <!--<a href="#" target="_blank">-->
                <!--<img src="../src/images/2.jpg" alt="哈佛大学用这12张图，教育了10亿人_心灵鸡汤" data-bd-imgshare-binded="1">-->
                <!--<h3>哈佛大学用这12张图，教育了10亿人_心灵鸡汤</h3>-->
                <!--<p class="muted">很多人把感恩当成一种付出，其实感恩本身就是一种幸福。...</p>-->
                <!--</a>-->
                <!--</div>-->
                <!--</div>-->
                <!--<div class="layui-row  layui-col-space1">-->
                <!--<div class="layui-col-sm6 recommendCard-left">-->
                <!--<a href="#" target="_blank">-->
                <!--<img src="../src/images/2.jpg" alt="哈佛大学用这12张图，教育了10亿人_心灵鸡汤" data-bd-imgshare-binded="1">-->
                <!--<h3>哈佛大学用这12张图，教育了10亿人_心灵鸡汤</h3>-->
                <!--<p class="muted">很多人把感恩当成一种付出，其实感恩本身就是一种幸福。...</p>-->
                <!--</a>-->
                <!--</div>-->
                <!--<div class="layui-col-sm6 recommendCard">-->
                <!--<a href="#" target="_blank">-->
                <!--<img src="../src/images/2.jpg" alt="哈佛大学用这12张图，教育了10亿人_心灵鸡汤" data-bd-imgshare-binded="1">-->
                <!--<h3>哈佛大学用这12张图，教育了10亿人_心灵鸡汤</h3>-->
                <!--<p class="muted">很多人把感恩当成一种付出，其实感恩本身就是一种幸福。...</p>-->
                <!--</a>-->
                <!--</div>-->
                <!--</div>-->
                <!--<div class="layui-row  layui-col-space1">-->
                <!--<div class="layui-col-sm6 recommendCard-left">-->
                <!--<a href="#" target="_blank">-->
                <!--<img src="../src/images/2.jpg" alt="哈佛大学用这12张图，教育了10亿人_心灵鸡汤" data-bd-imgshare-binded="1">-->
                <!--<h3>哈佛大学用这12张图，教育了10亿人_心灵鸡汤</h3>-->
                <!--<p class="muted">很多人把感恩当成一种付出，其实感恩本身就是一种幸福。...</p>-->
                <!--</a>-->
                <!--</div>-->
                <!--<div class="layui-col-sm6 recommendCard">-->
                <!--<a href="#" target="_blank">-->
                <!--<img src="../src/images/2.jpg" alt="哈佛大学用这12张图，教育了10亿人_心灵鸡汤" data-bd-imgshare-binded="1">-->
                <!--<h3>哈佛大学用这12张图，教育了10亿人_心灵鸡汤</h3>-->
                <!--<p class="muted">很多人把感恩当成一种付出，其实感恩本身就是一种幸福。...</p>-->
                <!--</a>-->
                <!--</div>-->
                <!--</div>-->
            </div>
            <div class="topContent" id="moodContent">
                <p class="recommend">个人动态</p>
                <div class="layui-row">
                    <div class="layui-col-md12 recommendCard">
                        <div>
                            <p>很多人把感恩当成一种付出，其实感恩本身就是一种幸福。... <img src="../src/images/7.png" alt=""></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <audio id="music" src="../src/music/qishidoumeiyou.mp3" current="m1" autoplay loop></audio>
        <div class="layui-col-sm3  layui-col-xs12 ">
            <div class="topContent-right">
                <p class="recommend-right">音乐<img class="music" id="music_img" src="../src/font/music.svg" alt="点击暂停\开始"
                                                  style="animation-play-state: paused;"></p>
                <div class="tag music-toogle">
                    <ul class="music-index">
                        <li musicSrc="../src/music/qishidoumeiyou.mp3">其实都没有 - - 杨宗纬 <span id="m1"
                                                                                           class="music-btn play"></span>
                        </li>
                        <li musicSrc="../src/music/tonghuazhen.mp3">童话镇 - - 陈一发儿 <span id="m2"
                                                                                       class="music-btn play"></span>
                        </li>
                        <li musicSrc="../src/music/yiqiangshiyiweilegou.mp3">一腔诗意喂了狗 - - 花粥 <span id="m3"
                                                                                                  class="music-btn play"></span>
                        </li>
                        <li musicSrc="../src/music/yaobukejideni.mp3">遥不可及的你 - - 花粥 <span id="m4"
                                                                                          class="music-btn play"></span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="topContent-right  layui-col-xs12">
                <p class="recommend-right">文章分类</p>
                <div class="tag clear" id="tagClassify">
                    <div class="tag-div">html</div>
                    <div class="tag-div">js</div>
                    <div class="tag-div">css</div>
                    <div class="tag-div">yangchaolin</div>
                    <div class="tag-div">杨俊梅</div>
                    <div class="tag-div">音乐汇</div>
                    <div class="tag-div">篮球比赛</div>
                    <div class="tag-div">NBA球星詹姆斯</div>
                </div>
            </div>
            <div class="topContent-right  layui-col-xs12">
                <div class="social">
                    <a href="https://weibo.com/bralion?is_all=1"  title="新浪微博" target="_blank" ><i class="sinaweibo fa fa-weibo"></i></a><a href="http://t.qq.com/Wantzycl"  title="腾讯微博" target="_blank"><i class="tencentweibo fa fa-tencent-weibo"></i></a><a class="weixin" title="微信"><i class="weixins fa fa-weixin"></i><div class="weixin-popover"><div class="popover bottom in"><div class="arrow"></div><div class="popover-title"></div><div class="popover-content"><img src="../src/images/weixin.png"></div></div></div></a>
                    <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=289459620@qq.com"  title="写信给我" target="_blank"><i class="email fa fa-envelope-o"></i></a><a href="#" target="_blank" title="" data-original-title="订阅本站"><i class="rss fa fa-rss"></i></a>
                </div>
            </div>
            <div class="topContent-right  layui-col-xs12">
                <p class="recommend-right" style="background:#1b6d85 url('../src/images/bg-tile.png');">友情链接</p>
                <div class="tag clear" id="tagClassify1">
                    <div class="tag-div"><a target="_blank" href="http://www.cocostory.cn">周维雪的个人博客</a></div>
                    <div class="tag-div"><a target="_blank" href="http://itbyc.com/">杨雨的个人博客</a></div>
                    <div class="tag-div"><a target="_blank" href="https://www.talklee.com/">非李莫属</a></div>
                    <div class="tag-div"><a target="_blank" href="http://www.oupan0612.com/">欧攀的个人网站</a></div>
                </div>
            </div>

        </div>
    </div>
</div>


<script src="../src/js/layui.js"></script>
<script>
    //主函数
    (function () {
        //注意：导航 依赖 element 模块，否则无法进行功能性操作
        layui.use('element', function () {
            var element = layui.element;

        });
        layui.use('form', function () {
            var form = layui.form;

        });
        layui.use('layer', function () {
            var layer = layui.layer;

        });
        layui.use('carousel', function () {
            var carousel = layui.carousel;
            //建造实例
            carousel.render({
                elem: '#test1'
                , width: '100%' //设置容器宽度
                , arrow: 'hover' //始终显示箭头
                //,anim: 'updown' //切换动画方式
                , autoplay: true
                , height: '509px'
            });

            function resize() {

                var d1 = document.getElementById("d1");
                var height = d1.clientHeight;
                carousel.render({
                    elem: '#test1'
                    , width: '100%' //设置容器宽度
                    , arrow: 'hover' //始终显示箭头
                    //,anim: 'updown' //切换动画方式
                    , autoplay: false
                    , height: height
                });
            }

//        resize();
//        //窗口改变大小的时候重新渲染一遍以实现响应式，autoplay必须设置为false否则多个定时器产生
//        window.onresize=resize;
        });
        indexMusic();
        //获取推荐内容
        getRecommend();
        //获取标签
        getTag();
        getMood();
        //音乐自动播放
        window.onload = function () {
            $('#m3').click();
            $('#m3').click();
        }
        //绑定微信iconhover事件;悬浮在微信图标上面，弹出微信二维码
        $('.weixin').hover(
            function(){
            $('.weixin-popover').css('display','block')
            },
            function(){
                $('.weixin-popover').css('display','none')
        });
    })()

    function getTag() {
        $.ajax({
            url: "getTag",
            type: "post",
            dataType: 'json',
            success: function (data) {
                if (data.code = '001') {
                    var html = ''
                    for (var i = 0; i < data.data.length; i++) {
                        console.log(bg)
                        var bg=randomColor(30);
                        html += `<div class="tag-div" style="background:${bg[0]};color:${bg[1]}" classifyId="${data.data[i].classifyId}">${data.data[i].classifyName} ${data.data[i].classifyNumber}</div>`
                    }
                    $("#tagClassify").html(html)
                }
                else {
                    alert(data.message)
                }
            }
        })
    }
    function indexMusic() {
        var music_img = document.getElementById("music_img");
        var music = document.getElementById("music");
        music.pause();
        var isPlay = -1;
        $(".music-index").click(bindClick);

        function bindClick() {
            $(".play").click(function () {
                isPlay = 1;
                music.src = $(this).parent().attr("musicSrc");
                $(music).attr("current", $(this).attr("id"));//记录当前歌曲的id
                music_img.style.animationPlayState = 'running';
                $(".pause").removeClass("pause").addClass("play");
                $(this).removeClass("play").addClass("pause");
            });
            $(".pause").click(function () {
                isPlay = -1;
                music_img.style.animationPlayState = 'paused';
                $(this).removeClass("pause").addClass("play");
                music.pause();
            });
        }

        music_img.onclick = function () {
            if (isPlay == 1) {
                music.pause();
                isPlay = -1;
                //动画暂停
                music_img.style.animationPlayState = 'paused';

            } else if (isPlay == -1) {
                music.play();
                isPlay = 1;
                //动画开始
                music_img.style.animationPlayState = 'running';
                var currentId = "#" + $(music).attr("current");
                if ($(currentId).hasClass("play")) {
                    $(currentId).removeClass("play").addClass("pause")
                }
            }
        };
    }

    function getRecommend() {
        var html = '<p class="recommend">最新发布</p>'
        $.ajax({
            url: "getRecommend",
            type: "post",
            dataType: 'json',
            success: function (a) {
                console.dir(a);
                for (var i = 0; i < a.length; i = i + 2) {
                    var imgNumber = a[i].boWenId % 9
                    var time = getMonthDay(a[i].editTime)
                    html += `
                    <div class="layui-row layui-col-space1">
                    <div class="layui-col-sm6 recommendCard-left" boWenId=${a[i].boWenId}>
                        <a  href="javascript:void(0)">
                            <img src="../src/images/${imgNumber}.png" alt=${a[i].blogTitle} data-bd-imgshare-binded="1">
                            <h3>${a[i].blogTitle}</h3>
                            <p>${a[i].contentTxt}</p>
                            <p class="bottom">
                            	<span class="muted"><i class="fa fa-user"></i> <a>${a[i].userName}</a></span>
                                <span class="muted"><i class="fa fa-clock-o"></i> ${time}</span>
                                <span class="muted"><i class="fa fa-eye"></i> ${a[i].viewNumber} 浏览</span>
                                <span class="muted"><i class="fa fa-clipboard"></i> <a> ${a[i].classifyName}</a></span>
                            </p>
                        </a>
                    </div>`
                    if (i + 1 < a.length) {
                        var time1 = getMonthDay(a[i + 1].editTime);
                        html += `<div class="layui-col-sm6 recommendCard"  boWenId=${a[i + 1].boWenId}>
                        <a  href="javascript:void(0)">
                            <img src="../src/images/${imgNumber + 1}.png" alt="${a[i + 1].blogTitle}" data-bd-imgshare-binded="1">
                            <h3>${a[i + 1].blogTitle}</h3>
                            <p>${a[i + 1].contentTxt}</p>
                            <p class="bottom">
                            	<span class="muted"><i class="fa fa-user"></i> <a >${a[i + 1].userName}</a></span>
                                <span class="muted"><i class="fa fa-clock-o"></i> ${time1}</span>
                                <span class="muted"><i class="fa fa-eye"></i> ${a[i + 1].viewNumber} 浏览</span>
                                <span class="muted"><i class="fa fa-clipboard"></i> <a> ${a[i + 1].classifyName}</a></span>
                            </p>
                        </a>
                    </div>`
                    }
                    html += ` </div>`
                }
                $("#topContent").html(html);
                $('.layui-col-sm6').click(function (e) {
                    console.dir($(this))
                    if ($(this).attr('bowenid')) {
                        var src = 'myblogDetail.html?id=' + $(this).attr('bowenid')
                        window.parent.setIframeSrc(src)
                    }
                })
                //设置页面高度
                window.parent.setIframeHeight();
            }
        });
    };

    function getMood() {
        var html = '<p class="recommend">个人动态</p>'
        $.ajax({
            url: "getMood",
            type: "post",
            dataType: 'json',
            success: function (a) {
                console.dir(a);
                for (var i = 0; i < a.length; i++) {
                    var time = getMonthDay(a[i].editTime)+" "+getTime(a[i].editTime);
                    html += `
                     <div class="layui-row">
                        <div class="layui-col-md12 recommendCard">
                            <div style="position: relative;height:70px">
                                 <img src="../src/images/qwe.png"  alt="头像" style="position: absolute;height:50px;">
                                 <p style="margin-left: 70px;line-height: 43px;"><span style="font-size: 15px;font-weight: bold;position: relative;top: 3px;">杨超林的猫</spanstyle></p>
                                 <p style="margin-left: 70px;font-size: 14px;color: #999;">${time}</p>
                            </div>
                            <div style="margin-left: 70px;margin-bottom: 10px;">

                            ${a[i].content}
                            </div>
                        </div>
                    </div>`
                }
                $("#moodContent").html(html);
                //设置页面高度
                window.parent.setIframeHeight(1498);
            }
        });
    }
</script>
</body>
</html>